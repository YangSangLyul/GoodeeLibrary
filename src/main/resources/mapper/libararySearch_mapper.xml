<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
   "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd"
>

<mapper namespace="com.spring.main.dao.LibrarySearchDAO">
	<insert id="reserveBook">
		INSERT INTO ReserveBook(reserveBookIdx,bookIdx,id)
			VALUES(reserveBookIdx_seq.NEXTVAL,#{param1},'test')
	</insert>
	
	<delete id="reserveBookCancel">
		DELETE FROM reserveBook WHERE reserveBookIdx = #{param1}
	</delete>
	
	<update id="rentalBook">
		UPDATE ReserveBook SET bookState = 'R002' WHERE reserveBookIdx = #{param1}
	</update>
	
	<update id="returnBook">
		UPDATE ReserveBook SET bookState = 'R003' WHERE reserveBookIdx = #{param1}
	</update>
	
	<select id="searchResult" parameterType="hashMap" resultType="com.spring.main.dto.BookDTO">
		
		SELECT * FROM book
		<where>
	 	<if test="search == '도서명'">
	 		bookname LIKE '%'||#{searchContent}||'%'
	 	</if>
	 	<if test="search == '저자명'">
	 		writer LIKE '%'||#{search}||'%'
	 	</if>
	 	</where>
		
	</select>
</mapper>